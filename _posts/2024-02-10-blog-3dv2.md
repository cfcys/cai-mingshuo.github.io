---
title: '3dv入门---3DGS'
date: 2024-02-18
permalink: /posts/2024/02/blog-3dv2/
star: superior
tags:
  - 3DV
  - 3DGS
---

群友说，在3dv会议上，3DGS一作讲论文的时候nerf一作进来发现没位置了，还被关门外了

# 3D Gaussian Splatting

## 三维高斯概念


## 整体的框架

![中文版3DS流程图](/images/blog/Blog3DGS/image-1.png)

* **重建流程**
1. 先得到一堆稀疏的点云（colmap中对于位姿信息的估计）
2. 根据这些初始化的点云生成三维高斯的椭球集。
3. 将三维高斯的椭球集从世界的坐标投影到平面的相机上去,进行**光栅化**（光栅化就是从3维投影到2维）
4. 根据渲染公式

## 初始稀疏点云

就是colmap的方式
但是有意思的是，由于后续还会有梯度回传到点云里，因此这里点云甚至可以随机初始化出来，就是可能导致收敛时间更长了些。

## 3D高斯椭球集的创建----位置与形状

位置信息：点云位置信息优化,也就是$(x,y,z)$，即高斯椭球的中心点(均值$\mu$)

形状信息：高斯椭球的协方差矩阵$\Sigma$,$\Sigma$包含高斯椭球的旋转矩阵$R$和在各个轴的缩放矩阵$S$，其中$\Sigma = RSS^TR^T$,缩放，再还原回去

## 3D高斯椭球集的创建----颜色与不透明度

颜色信息：点云颜色$(r,g,b)$----使用球谐函数来表示，使得点云在不同的角度会呈现不同的颜色，而且有利于提高迭代的效率(在代码中使用4阶来表示)

不透明度信息：点云的不透明度，密度优化$\alpha$

## 关于球谐函数

球谐函数可以看作是一种多项式的拟合，在多项式的拟合中，表达能力会随着阶数的能力的提升而提高；例如$f(x) = ax^3+bx^2+cx^1+dx^0$中，$x^3,x^2,x^1,x^0$分别代表基函数。
而傅里叶级数的展开，其实就是使用了$sinx$和$cosx$这样的基函数去拟合出不同的周期函数。而球谐函数，就是一个用在球面上的基函数，用于去拟合球面上不停变换的离散的值，其阶数越高，表达能力会越强。

![不同阶数的球谐函数可视化图](/images/blog/Blog3DGS/image-2.png)

球谐函数是什么我们先不用管，先了解球谐函数只与$\theta$和$\phi$有关，

![不同阶数的基函数进行线性组合去表示不同的三维形状](/images/blog/Blog3DGS/image-3.png)

> “这玩意直接拟合三维点云不就有密集三维模型了吗”

对这些球谐函数的基函数进行加权组合，得到球面上的一组函数，从而有效地将离散的数据转化为连续的数据。在3DGS中，点云颜色$(r,g,b)$是使用球谐函数来表示的，使得点云在不同的角度可以呈现不同的颜色，并且有利于提高迭代的效率。

![组合之后，可以将离散的颜色数据转化为连续的颜色数据](/images/blog/Blog3DGS/image-4.png)

在3DGS的实际过程中，点云颜色使用了4阶的球谐函数进行表示，$n$阶球谐函数的参数量为$n^2$，组合之后，可以将离散的颜色数据转化为连续的颜色数据，同时有利于对参数进行迭代

## 基于梯度自适应改变点云的分布方式

1. Pruning掉一些透明度很高的点，或者离相机比较近的一些点
2. 过度重构和欠采样

![克隆与分割](/images/blog/Blog3DGS/image-5.png) 

# 3DGS代码解析

## Rander函数的过程
这部分的重点在与怎么把一个个3d的椭球投影到平面上
![AI葵1](image.png)
针对于每个像素，投影到高斯上的像素的数量是不一样的，**因此无法使用pytorch来很好的将这个东西进行平行化（细品一下）。**

# 使用3DGS进行身边场景的重建

![将视频抽帧为很多歌图片的视频](/images/blog/Blog3DGS/image-6.png)

* 效果展示：

[西电李白烈士雕塑3d重建](https://cfcys.github.io/paper/3dv2/demo.html)

## 参考资料

[简单入门资料](https://zhuanlan.zhihu.com/p/680669616)